
public static void addChildElementsUsingNamespaceOnly(
        Document doc,
        Element parent,
        List<ChildElement> children
) {
    String namespaceUri = parent.getNamespaceURI();

    for (ChildElement child : children) {
        // Create using only local name (without any prefix)
        Element childElement = doc.createElementNS(namespaceUri, child.qualifiedName); // allow "po:City" or "Address"

        if (child.text != null) {
            childElement.setTextContent(child.text);
        }

        if (child.attributes != null) {
            for (Map.Entry<String, String> attr : child.attributes.entrySet()) {
                childElement.setAttribute(attr.getKey(), attr.getValue());
            }
        }

        parent.appendChild(childElement);
    }
}
